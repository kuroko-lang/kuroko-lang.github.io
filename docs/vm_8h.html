<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.17"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="tabs-override.css">
    <link rel="stylesheet" href="doxy.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>Docs | Kuroko</title>
    <script src="/src-min/ace.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  </head>
  <body>
  <!-- Bootstrap nav bar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav ms-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link force-cursor" href="/?r=y&c=tutorial()">Tutorial</a>
            </li>
            <li class="nav-item">
              <a class="nav-link force-cursor" href="/ide/">IDE</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="/" id="navbarDropdown">
                Examples
              </a>
            </li>
          </ul>
        </div>
        <div class="mx-auto order-0" style="padding-left: 2rem; padding-right: 2rem">
          <a class="navbar-brand" href="/">
            <img src="/logo.png" style="height: 2rem; padding-right: 0.5rem;">
            Kuroko
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/kuroko-lang/kuroko">Github</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/kuroko-lang/kuroko/releases">Downloads</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/docs/">Docs</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Bootstrap nav bar -->
    <main class="order-1 container" id="main-content">
      <div id="top">
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_a9c02f84cf33450e01c05657a3346ead.html">kuroko</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">vm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Core API for the bytecode virtual machine.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="kuroko_8h_source.html">kuroko.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="value_8h_source.html">value.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="table_8h_source.html">table.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="object_8h_source.html">object.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vm.h:</div>
<div class="dyncontent">
<div class="center"><img src="vm_8h__incl.png" border="0" usemap="#src_2kuroko_2vm_8h" alt=""/></div>
<map name="src_2kuroko_2vm_8h" id="src_2kuroko_2vm_8h">
<area shape="rect" title="Core API for the bytecode virtual machine." alt="" coords="335,5,462,32"/>
<area shape="rect" title=" " alt="" coords="5,80,80,107"/>
<area shape="rect" title=" " alt="" coords="104,80,168,107"/>
<area shape="rect" title=" " alt="" coords="192,80,288,107"/>
<area shape="rect" title=" " alt="" coords="312,80,403,107"/>
<area shape="rect" href="kuroko_8h.html" title="Top&#45;level header with configuration macros." alt="" coords="658,304,737,331"/>
<area shape="rect" href="value_8h.html" title="Definitions for primitive stack references." alt="" coords="554,229,625,256"/>
<area shape="rect" href="table_8h.html" title="Implementation of a generic hash table." alt="" coords="300,155,367,181"/>
<area shape="rect" href="object_8h.html" title="Struct definitions for core object types." alt="" coords="477,80,552,107"/>
<area shape="rect" title=" " alt="" coords="710,379,781,405"/>
<area shape="rect" title=" " alt="" coords="611,379,685,405"/>
<area shape="rect" title=" " alt="" coords="379,379,450,405"/>
<area shape="rect" title=" " alt="" coords="472,304,539,331"/>
<area shape="rect" title=" " alt="" coords="563,304,634,331"/>
<area shape="rect" href="threads_8h.html" title="Convience header for providing atomic operations to threads." alt="" coords="284,229,367,256"/>
<area shape="rect" title=" " alt="" coords="363,304,447,331"/>
<area shape="rect" title=" " alt="" coords="267,304,339,331"/>
<area shape="rect" href="chunk_8h.html" title="Structures and enums for bytecode chunks." alt="" coords="553,155,626,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="vm_8h__dep__incl.png" border="0" usemap="#src_2kuroko_2vm_8hdep" alt=""/></div>
<map name="src_2kuroko_2vm_8hdep" id="src_2kuroko_2vm_8hdep">
<area shape="rect" title="Core API for the bytecode virtual machine." alt="" coords="2019,5,2145,32"/>
<area shape="rect" href="builtins_8c_source.html" title=" " alt="" coords="267,155,371,181"/>
<area shape="rect" href="chunk_8c_source.html" title=" " alt="" coords="2703,80,2797,107"/>
<area shape="rect" href="compiler_8c.html" title="Single&#45;pass bytecode compiler." alt="" coords="5,155,119,181"/>
<area shape="rect" href="debug_8c_source.html" title=" " alt="" coords="395,155,491,181"/>
<area shape="rect" href="exceptions_8c.html" title="Definitions and native method bindings for error types." alt="" coords="908,155,1035,181"/>
<area shape="rect" href="fileio_8c.html" title="Provides an interface to C FILE* streams." alt="" coords="1059,155,1148,181"/>
<area shape="rect" href="kuroko_8c_source.html" title=" " alt="" coords="143,155,243,181"/>
<area shape="rect" href="memory_8c_source.html" title=" " alt="" coords="1173,155,1282,181"/>
<area shape="rect" href="module__math_8c_source.html" title=" " alt="" coords="1306,155,1453,181"/>
<area shape="rect" href="module__socket_8c.html" title="Lightweight, low&#45;level wrapper around the standard Berkley sockets API." alt="" coords="1477,155,1631,181"/>
<area shape="rect" href="obj__base_8c_source.html" title=" " alt="" coords="1655,155,1770,181"/>
<area shape="rect" href="obj__bytes_8c_source.html" title=" " alt="" coords="1795,155,1913,181"/>
<area shape="rect" href="obj__dict_8c_source.html" title=" " alt="" coords="2067,155,2174,181"/>
<area shape="rect" href="obj__function_8c_source.html" title=" " alt="" coords="515,155,651,181"/>
<area shape="rect" href="obj__gen_8c.html" title="Generator objects." alt="" coords="675,155,782,181"/>
<area shape="rect" href="obj__list_8c_source.html" title=" " alt="" coords="2199,155,2301,181"/>
<area shape="rect" href="obj__numeric_8c_source.html" title=" " alt="" coords="2326,155,2462,181"/>
<area shape="rect" href="obj__range_8c_source.html" title=" " alt="" coords="2486,155,2606,181"/>
<area shape="rect" href="obj__set_8c_source.html" title=" " alt="" coords="2631,155,2733,181"/>
<area shape="rect" href="obj__str_8c_source.html" title=" " alt="" coords="2757,155,2857,181"/>
<area shape="rect" href="obj__tuple_8c_source.html" title=" " alt="" coords="2881,155,2997,181"/>
<area shape="rect" href="obj__typing_8c_source.html" title=" " alt="" coords="3021,155,3145,181"/>
<area shape="rect" href="object_8c_source.html" title=" " alt="" coords="2822,80,2918,107"/>
<area shape="rect" href="os_8c_source.html" title=" " alt="" coords="3169,155,3240,181"/>
<area shape="rect" href="table_8c_source.html" title=" " alt="" coords="3264,155,3353,181"/>
<area shape="rect" href="time_8c_source.html" title=" " alt="" coords="3377,155,3464,181"/>
<area shape="rect" href="value_8c_source.html" title=" " alt="" coords="2943,80,3035,107"/>
<area shape="rect" href="vm_8c_source.html" title=" " alt="" coords="806,155,883,181"/>
<area shape="rect" href="debug_8h.html" title="Functions for debugging bytecode execution." alt="" coords="504,80,649,107"/>
<area shape="rect" href="util_8h.html" title="Utilities for creating native bindings." alt="" coords="1892,80,2019,107"/>
<area shape="rect" href="compile_8c_source.html" title=" " alt="" coords="3488,155,3609,181"/>
<area shape="rect" href="sandbox_8c_source.html" title=" " alt="" coords="3633,155,3757,181"/>
<area shape="rect" href="debug-stats_8c_source.html" title=" " alt="" coords="3059,80,3206,107"/>
<area shape="rect" href="demo_8c_source.html" title=" " alt="" coords="3230,80,3337,107"/>
<area shape="rect" href="threads_8c_source.html" title=" " alt="" coords="1937,155,2043,181"/>
</map>
</div>
</div>
<p><a href="vm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structKrkCallFrame.html">KrkCallFrame</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a managed call state in a VM thread.  <a href="structKrkCallFrame.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structExceptions.html">Exceptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Table of basic exception types.  <a href="structExceptions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBaseClasses.html">BaseClasses</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Table of classes for built-in object types.  <a href="structBaseClasses.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structKrkThreadState.html">KrkThreadState</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execution state of a VM thread.  <a href="structKrkThreadState.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structKrkVM.html">KrkVM</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global VM state.  <a href="structKrkVM.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad5360f45458f1811bfea3619825f328a"><td class="memItemLeft" align="right" valign="top"><a id="ad5360f45458f1811bfea3619825f328a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ad5360f45458f1811bfea3619825f328a">KRK_CALL_FRAMES_MAX</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:ad5360f45458f1811bfea3619825f328a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum depth of the call stack in managed-code function calls. <br /></td></tr>
<tr class="separator:ad5360f45458f1811bfea3619825f328a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a953d72106f209857d287c39553d49b25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a953d72106f209857d287c39553d49b25">KRK_THREAD_SCRATCH_SIZE</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a953d72106f209857d287c39553d49b25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra space for each thread to store a set of working values safe from the GC.  <a href="vm_8h.html#a953d72106f209857d287c39553d49b25">More...</a><br /></td></tr>
<tr class="separator:a953d72106f209857d287c39553d49b25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7a3473c6f41fdd8d7558124efe2036"><td class="memItemLeft" align="right" valign="top"><a id="aae7a3473c6f41fdd8d7558124efe2036"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_THREAD_ENABLE_TRACING</b>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:aae7a3473c6f41fdd8d7558124efe2036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa688673377cf95dafc733cadcc701d4a"><td class="memItemLeft" align="right" valign="top"><a id="aa688673377cf95dafc733cadcc701d4a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_THREAD_ENABLE_DISASSEMBLY</b>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:aa688673377cf95dafc733cadcc701d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14feda1c31742f07c5ef8879c728bb7"><td class="memItemLeft" align="right" valign="top"><a id="ab14feda1c31742f07c5ef8879c728bb7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_THREAD_ENABLE_SCAN_TRACING</b>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="separator:ab14feda1c31742f07c5ef8879c728bb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e1779ce434c0fc153779f3abb459967"><td class="memItemLeft" align="right" valign="top"><a id="a5e1779ce434c0fc153779f3abb459967"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_THREAD_HAS_EXCEPTION</b>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="separator:a5e1779ce434c0fc153779f3abb459967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae255e97b11e8a89885deb0fc24cc68d9"><td class="memItemLeft" align="right" valign="top"><a id="ae255e97b11e8a89885deb0fc24cc68d9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_THREAD_SINGLE_STEP</b>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="separator:ae255e97b11e8a89885deb0fc24cc68d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64db80900478c3db3877b784923416a9"><td class="memItemLeft" align="right" valign="top"><a id="a64db80900478c3db3877b784923416a9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_THREAD_SIGNALLED</b>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="separator:a64db80900478c3db3877b784923416a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac156e1dc6f5642d631c41de30092bc23"><td class="memItemLeft" align="right" valign="top"><a id="ac156e1dc6f5642d631c41de30092bc23"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_GLOBAL_ENABLE_STRESS_GC</b>&#160;&#160;&#160;(1 &lt;&lt; 8)</td></tr>
<tr class="separator:ac156e1dc6f5642d631c41de30092bc23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b18e2b2fce99432bb0bc47faea7e381"><td class="memItemLeft" align="right" valign="top"><a id="a7b18e2b2fce99432bb0bc47faea7e381"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_GLOBAL_GC_PAUSED</b>&#160;&#160;&#160;(1 &lt;&lt; 9)</td></tr>
<tr class="separator:a7b18e2b2fce99432bb0bc47faea7e381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fda8d0da0ef695bc2764ca914580baf"><td class="memItemLeft" align="right" valign="top"><a id="a2fda8d0da0ef695bc2764ca914580baf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_GLOBAL_CLEAN_OUTPUT</b>&#160;&#160;&#160;(1 &lt;&lt; 10)</td></tr>
<tr class="separator:a2fda8d0da0ef695bc2764ca914580baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee62293ec2197c5e73505cc1015a68cd"><td class="memItemLeft" align="right" valign="top"><a id="aee62293ec2197c5e73505cc1015a68cd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_GLOBAL_CALLGRIND</b>&#160;&#160;&#160;(1 &lt;&lt; 11)</td></tr>
<tr class="separator:aee62293ec2197c5e73505cc1015a68cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a557f48d62e9eb0daab6da566a3eb528f"><td class="memItemLeft" align="right" valign="top"><a id="a557f48d62e9eb0daab6da566a3eb528f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_GLOBAL_REPORT_GC_COLLECTS</b>&#160;&#160;&#160;(1 &lt;&lt; 12)</td></tr>
<tr class="separator:a557f48d62e9eb0daab6da566a3eb528f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4898a7862f9519a59061fbe7bdb43de3"><td class="memItemLeft" align="right" valign="top"><a id="a4898a7862f9519a59061fbe7bdb43de3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>KRK_GLOBAL_THREADS</b>&#160;&#160;&#160;(1 &lt;&lt; 13)</td></tr>
<tr class="separator:a4898a7862f9519a59061fbe7bdb43de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b60b0bd6cc374e0ce3dcc6550d096eb"><td class="memItemLeft" align="right" valign="top"><a id="a3b60b0bd6cc374e0ce3dcc6550d096eb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>threadLocal</b>&#160;&#160;&#160;__thread</td></tr>
<tr class="separator:a3b60b0bd6cc374e0ce3dcc6550d096eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f431666f8fecd56bd5f4111068f50c0"><td class="memItemLeft" align="right" valign="top"><a id="a4f431666f8fecd56bd5f4111068f50c0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a4f431666f8fecd56bd5f4111068f50c0">vm</a>&#160;&#160;&#160;<a class="el" href="vm_8h.html#a5566b2651724f1ac1ac4a130d69f320c">krk_vm</a></td></tr>
<tr class="memdesc:a4f431666f8fecd56bd5f4111068f50c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience macro for namespacing. <br /></td></tr>
<tr class="separator:a4f431666f8fecd56bd5f4111068f50c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad845f3a8058abb66385dfbb6d31a8dfc"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structKrkThreadState.html">KrkThreadState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ad845f3a8058abb66385dfbb6d31a8dfc">KrkThreadState</a></td></tr>
<tr class="memdesc:ad845f3a8058abb66385dfbb6d31a8dfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execution state of a VM thread.  <a href="vm_8h.html#ad845f3a8058abb66385dfbb6d31a8dfc">More...</a><br /></td></tr>
<tr class="separator:ad845f3a8058abb66385dfbb6d31a8dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24d03c0b5b25d5ddfa9f902f1d2c97a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structKrkVM.html">KrkVM</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ab24d03c0b5b25d5ddfa9f902f1d2c97a">KrkVM</a></td></tr>
<tr class="memdesc:ab24d03c0b5b25d5ddfa9f902f1d2c97a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global VM state.  <a href="vm_8h.html#ab24d03c0b5b25d5ddfa9f902f1d2c97a">More...</a><br /></td></tr>
<tr class="separator:ab24d03c0b5b25d5ddfa9f902f1d2c97a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a62180e29e93500068869ad4a459be927"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a62180e29e93500068869ad4a459be927">KrkSpecialMethods</a> { <br />
&#160;&#160;<b>METHOD_INIT</b>, 
<b>METHOD_STR</b>, 
<b>METHOD_REPR</b>, 
<b>METHOD_GET</b>, 
<br />
&#160;&#160;<b>METHOD_SET</b>, 
<b>METHOD_CLASS</b>, 
<b>METHOD_NAME</b>, 
<b>METHOD_FILE</b>, 
<br />
&#160;&#160;<b>METHOD_INT</b>, 
<b>METHOD_FLOAT</b>, 
<b>METHOD_CHR</b>, 
<b>METHOD_LEN</b>, 
<br />
&#160;&#160;<b>METHOD_DOC</b>, 
<b>METHOD_BASE</b>, 
<b>METHOD_GETSLICE</b>, 
<b>METHOD_ORD</b>, 
<br />
&#160;&#160;<b>METHOD_CALL</b>, 
<b>METHOD_EQ</b>, 
<b>METHOD_ENTER</b>, 
<b>METHOD_EXIT</b>, 
<br />
&#160;&#160;<b>METHOD_DELITEM</b>, 
<b>METHOD_ITER</b>, 
<b>METHOD_GETATTR</b>, 
<b>METHOD_DIR</b>, 
<br />
&#160;&#160;<b>METHOD_SETSLICE</b>, 
<b>METHOD_DELSLICE</b>, 
<b>METHOD_CONTAINS</b>, 
<b>METHOD_DESCGET</b>, 
<br />
&#160;&#160;<b>METHOD_DESCSET</b>, 
<b>METHOD_CLASSGETITEM</b>, 
<b>METHOD_HASH</b>, 
<b>METHOD__MAX</b>
<br />
 }</td></tr>
<tr class="memdesc:a62180e29e93500068869ad4a459be927"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index numbers for always-available interned strings representing important method and member names.  <a href="vm_8h.html#a62180e29e93500068869ad4a459be927">More...</a><br /></td></tr>
<tr class="separator:a62180e29e93500068869ad4a459be927"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a27e346ab67b34940df32c51fcd850419"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a27e346ab67b34940df32c51fcd850419">krk_resetStack</a> (void)</td></tr>
<tr class="memdesc:a27e346ab67b34940df32c51fcd850419"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the current thread's stack state to the top level.  <a href="vm_8h.html#a27e346ab67b34940df32c51fcd850419">More...</a><br /></td></tr>
<tr class="separator:a27e346ab67b34940df32c51fcd850419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa956022075e59caef32f51e9b48d00c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#afa956022075e59caef32f51e9b48d00c">krk_interpret</a> (const char *src, char *fromFile)</td></tr>
<tr class="memdesc:afa956022075e59caef32f51e9b48d00c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compile and execute a source code input.  <a href="vm_8h.html#afa956022075e59caef32f51e9b48d00c">More...</a><br /></td></tr>
<tr class="separator:afa956022075e59caef32f51e9b48d00c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99cc264b2e561baa3bc7ec2514de19a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a99cc264b2e561baa3bc7ec2514de19a1">krk_runfile</a> (const char *fileName, char *fromFile)</td></tr>
<tr class="memdesc:a99cc264b2e561baa3bc7ec2514de19a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load and run a source file and return when execution completes.  <a href="vm_8h.html#a99cc264b2e561baa3bc7ec2514de19a1">More...</a><br /></td></tr>
<tr class="separator:a99cc264b2e561baa3bc7ec2514de19a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e088692f7a0c84155023c8b06caedd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a52e088692f7a0c84155023c8b06caedd">krk_callfile</a> (const char *fileName, char *fromFile)</td></tr>
<tr class="memdesc:a52e088692f7a0c84155023c8b06caedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load and run a file as a module.  <a href="vm_8h.html#a52e088692f7a0c84155023c8b06caedd">More...</a><br /></td></tr>
<tr class="separator:a52e088692f7a0c84155023c8b06caedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbad085e3268a31810c61b4eba9c5e13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#acbad085e3268a31810c61b4eba9c5e13">krk_push</a> (<a class="el" href="structKrkValue.html">KrkValue</a> value)</td></tr>
<tr class="memdesc:acbad085e3268a31810c61b4eba9c5e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a stack value.  <a href="vm_8h.html#acbad085e3268a31810c61b4eba9c5e13">More...</a><br /></td></tr>
<tr class="separator:acbad085e3268a31810c61b4eba9c5e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b6ac1f260ba70761fd2e6d757ec233"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a73b6ac1f260ba70761fd2e6d757ec233">krk_pop</a> (void)</td></tr>
<tr class="memdesc:a73b6ac1f260ba70761fd2e6d757ec233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop the top of the stack.  <a href="vm_8h.html#a73b6ac1f260ba70761fd2e6d757ec233">More...</a><br /></td></tr>
<tr class="separator:a73b6ac1f260ba70761fd2e6d757ec233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade14216c05afbcf8d55b95c887c57d84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ade14216c05afbcf8d55b95c887c57d84">krk_peek</a> (int distance)</td></tr>
<tr class="memdesc:ade14216c05afbcf8d55b95c887c57d84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peek down from the top of the stack.  <a href="vm_8h.html#ade14216c05afbcf8d55b95c887c57d84">More...</a><br /></td></tr>
<tr class="separator:ade14216c05afbcf8d55b95c887c57d84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df3bd9547300e90d44e22b137ffb5ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a8df3bd9547300e90d44e22b137ffb5ba">krk_swap</a> (int distance)</td></tr>
<tr class="memdesc:a8df3bd9547300e90d44e22b137ffb5ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Swap the top of the stack of the value <code>distance</code> slots down.  <a href="vm_8h.html#a8df3bd9547300e90d44e22b137ffb5ba">More...</a><br /></td></tr>
<tr class="separator:a8df3bd9547300e90d44e22b137ffb5ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c57f379018d1ce7efca0a406e35431"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a91c57f379018d1ce7efca0a406e35431">krk_runtimeError</a> (<a class="el" href="structKrkClass.html">KrkClass</a> *type, const char *fmt,...)</td></tr>
<tr class="memdesc:a91c57f379018d1ce7efca0a406e35431"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raise an exception.  <a href="vm_8h.html#a91c57f379018d1ce7efca0a406e35431">More...</a><br /></td></tr>
<tr class="separator:a91c57f379018d1ce7efca0a406e35431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593d5627429c9ebf20f406723df0fd0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkThreadState.html">KrkThreadState</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a593d5627429c9ebf20f406723df0fd0c">krk_getCurrentThread</a> (void)</td></tr>
<tr class="memdesc:a593d5627429c9ebf20f406723df0fd0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the current thread state.  <a href="vm_8h.html#a593d5627429c9ebf20f406723df0fd0c">More...</a><br /></td></tr>
<tr class="separator:a593d5627429c9ebf20f406723df0fd0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1888ed7a2fa5d9f3f1cd619543a4f9a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a1888ed7a2fa5d9f3f1cd619543a4f9a1">krk_runNext</a> (void)</td></tr>
<tr class="memdesc:a1888ed7a2fa5d9f3f1cd619543a4f9a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Continue VM execution until the next exit trigger.  <a href="vm_8h.html#a1888ed7a2fa5d9f3f1cd619543a4f9a1">More...</a><br /></td></tr>
<tr class="separator:a1888ed7a2fa5d9f3f1cd619543a4f9a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae174ce2f93bf0cc63ae45f90e8c61840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ae174ce2f93bf0cc63ae45f90e8c61840">krk_dumpTraceback</a> ()</td></tr>
<tr class="memdesc:ae174ce2f93bf0cc63ae45f90e8c61840"><td class="mdescLeft">&#160;</td><td class="mdescRight">If there is an active exception, print a traceback to <code>stderr</code>.  <a href="vm_8h.html#ae174ce2f93bf0cc63ae45f90e8c61840">More...</a><br /></td></tr>
<tr class="separator:ae174ce2f93bf0cc63ae45f90e8c61840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad067a4963efa7c2e48afd53fe2269c72"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkInstance.html">KrkInstance</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ad067a4963efa7c2e48afd53fe2269c72">krk_startModule</a> (const char *name)</td></tr>
<tr class="memdesc:ad067a4963efa7c2e48afd53fe2269c72"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structSet.html" title="Mutable unordered set of values.">Set</a> up a new module object in the current thread.  <a href="vm_8h.html#ad067a4963efa7c2e48afd53fe2269c72">More...</a><br /></td></tr>
<tr class="separator:ad067a4963efa7c2e48afd53fe2269c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb9d121ec1eee51596b271695a75072"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#aecb9d121ec1eee51596b271695a75072">krk_dirObject</a> (int argc, <a class="el" href="structKrkValue.html">KrkValue</a> argv[], int hasKw)</td></tr>
<tr class="memdesc:aecb9d121ec1eee51596b271695a75072"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain a list of properties for an object.  <a href="vm_8h.html#aecb9d121ec1eee51596b271695a75072">More...</a><br /></td></tr>
<tr class="separator:aecb9d121ec1eee51596b271695a75072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa40a950fdc2439bd080b4560830d1ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#aaa40a950fdc2439bd080b4560830d1ea">krk_loadModule</a> (<a class="el" href="structKrkString.html">KrkString</a> *path, <a class="el" href="structKrkValue.html">KrkValue</a> *moduleOut, <a class="el" href="structKrkString.html">KrkString</a> *runAs)</td></tr>
<tr class="memdesc:aaa40a950fdc2439bd080b4560830d1ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a module from a file with a specified name.  <a href="vm_8h.html#aaa40a950fdc2439bd080b4560830d1ea">More...</a><br /></td></tr>
<tr class="separator:aaa40a950fdc2439bd080b4560830d1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546937bd02ff16f521d4b7675b41cfd9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a546937bd02ff16f521d4b7675b41cfd9">krk_doRecursiveModuleLoad</a> (<a class="el" href="structKrkString.html">KrkString</a> *name)</td></tr>
<tr class="memdesc:a546937bd02ff16f521d4b7675b41cfd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a module by a dotted name.  <a href="vm_8h.html#a546937bd02ff16f521d4b7675b41cfd9">More...</a><br /></td></tr>
<tr class="separator:a546937bd02ff16f521d4b7675b41cfd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22918dd9c5fe8e3e7d274da3e45fc0ce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a22918dd9c5fe8e3e7d274da3e45fc0ce">krk_importModule</a> (<a class="el" href="structKrkString.html">KrkString</a> *name, <a class="el" href="structKrkString.html">KrkString</a> *runAs)</td></tr>
<tr class="memdesc:a22918dd9c5fe8e3e7d274da3e45fc0ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load the dotted name <code>name</code> with the final element as <code>runAs</code>.  <a href="vm_8h.html#a22918dd9c5fe8e3e7d274da3e45fc0ce">More...</a><br /></td></tr>
<tr class="separator:a22918dd9c5fe8e3e7d274da3e45fc0ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848239e87a5f9978ec0480c1bd3a4d87"><td class="memItemLeft" align="right" valign="top"><a id="a848239e87a5f9978ec0480c1bd3a4d87"></a>
<a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a848239e87a5f9978ec0480c1bd3a4d87">krk_valueGetAttribute_default</a> (<a class="el" href="structKrkValue.html">KrkValue</a> value, char *name, <a class="el" href="structKrkValue.html">KrkValue</a> defaultVal)</td></tr>
<tr class="memdesc:a848239e87a5f9978ec0480c1bd3a4d87"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="structKrkValue.html#ab5581905a34dc5420e3cd580303fab2e">krk_valueGetAttribute</a>. <br /></td></tr>
<tr class="separator:a848239e87a5f9978ec0480c1bd3a4d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4be90c3c58b55439bb59bb63559c8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#abd4be90c3c58b55439bb59bb63559c8e">krk_addObjects</a> (void)</td></tr>
<tr class="memdesc:abd4be90c3c58b55439bb59bb63559c8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Concatenate two strings.  <a href="vm_8h.html#abd4be90c3c58b55439bb59bb63559c8e">More...</a><br /></td></tr>
<tr class="separator:abd4be90c3c58b55439bb59bb63559c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a689bcd042d2b52dead1188e9ee18bb98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a689bcd042d2b52dead1188e9ee18bb98">krk_operator_lt</a> (<a class="el" href="structKrkValue.html">KrkValue</a>, <a class="el" href="structKrkValue.html">KrkValue</a>)</td></tr>
<tr class="memdesc:a689bcd042d2b52dead1188e9ee18bb98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two values, returning True if the left is less than the right.  <a href="vm_8h.html#a689bcd042d2b52dead1188e9ee18bb98">More...</a><br /></td></tr>
<tr class="separator:a689bcd042d2b52dead1188e9ee18bb98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7095dc680592ce473a69eecc10e77ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#ae7095dc680592ce473a69eecc10e77ca">krk_operator_gt</a> (<a class="el" href="structKrkValue.html">KrkValue</a>, <a class="el" href="structKrkValue.html">KrkValue</a>)</td></tr>
<tr class="memdesc:ae7095dc680592ce473a69eecc10e77ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare to values, returning True if the left is greater than the right.  <a href="vm_8h.html#ae7095dc680592ce473a69eecc10e77ca">More...</a><br /></td></tr>
<tr class="separator:ae7095dc680592ce473a69eecc10e77ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a779017d9bc71ee676356ca7a044eadee"><td class="memItemLeft" align="right" valign="top">threadLocal <a class="el" href="structKrkThreadState.html">KrkThreadState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a779017d9bc71ee676356ca7a044eadee">krk_currentThread</a></td></tr>
<tr class="memdesc:a779017d9bc71ee676356ca7a044eadee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-local VM state.  <a href="vm_8h.html#a779017d9bc71ee676356ca7a044eadee">More...</a><br /></td></tr>
<tr class="separator:a779017d9bc71ee676356ca7a044eadee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5566b2651724f1ac1ac4a130d69f320c"><td class="memItemLeft" align="right" valign="top"><a id="a5566b2651724f1ac1ac4a130d69f320c"></a>
<a class="el" href="structKrkVM.html">KrkVM</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vm_8h.html#a5566b2651724f1ac1ac4a130d69f320c">krk_vm</a></td></tr>
<tr class="memdesc:a5566b2651724f1ac1ac4a130d69f320c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance of the shared VM state. <br /></td></tr>
<tr class="separator:a5566b2651724f1ac1ac4a130d69f320c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Core API for the bytecode virtual machine. </p>
<p>Functions and structures declared here make up the bulk of the public C API for Kuroko, including initializing the VM and passing code to be interpreted. </p>

<p class="definition">Definition in file <a class="el" href="vm_8h_source.html">vm.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a953d72106f209857d287c39553d49b25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a953d72106f209857d287c39553d49b25">&#9670;&nbsp;</a></span>KRK_THREAD_SCRATCH_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KRK_THREAD_SCRATCH_SIZE&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extra space for each thread to store a set of working values safe from the GC. </p>
<p>Various operations require threads to remove values from the stack but ensure they are not lost to garbage collection. This space allows each thread to keep a few things around during those operations. </p>

<p class="definition">Definition at line <a class="el" href="vm_8h_source.html#l00032">32</a> of file <a class="el" href="vm_8h_source.html">vm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ad845f3a8058abb66385dfbb6d31a8dfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad845f3a8058abb66385dfbb6d31a8dfc">&#9670;&nbsp;</a></span>KrkThreadState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structKrkThreadState.html">KrkThreadState</a> <a class="el" href="structKrkThreadState.html">KrkThreadState</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execution state of a VM thread. </p>
<p>Each thread in the VM has its own local thread state, which contains the thread's stack, stack pointer, call frame stack, a thread-specific VM flags bitarray, and an exception state.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="vm_8h.html#a779017d9bc71ee676356ca7a044eadee" title="Thread-local VM state.">krk_currentThread</a> </dd></dl>

</div>
</div>
<a id="ab24d03c0b5b25d5ddfa9f902f1d2c97a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24d03c0b5b25d5ddfa9f902f1d2c97a">&#9670;&nbsp;</a></span>KrkVM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structKrkVM.html">KrkVM</a> <a class="el" href="structKrkVM.html">KrkVM</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global VM state. </p>
<p>This state is shared by all VM threads and stores the path to the VM binary, global execution flags, the string and module tables, tables of builtin types, and the state of the (shared) garbage collector. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a62180e29e93500068869ad4a459be927"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62180e29e93500068869ad4a459be927">&#9670;&nbsp;</a></span>KrkSpecialMethods</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="vm_8h.html#a62180e29e93500068869ad4a459be927">KrkSpecialMethods</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index numbers for always-available interned strings representing important method and member names. </p>
<p>The VM must look up many methods and members by fixed names. To avoid continuously having to box and unbox these from C strings to the appropriate interned <code><a class="el" href="structKrkString.html" title="Immutable sequence of Unicode codepoints.">KrkString</a></code>, we keep an array of the <code><a class="el" href="structKrkString.html" title="Immutable sequence of Unicode codepoints.">KrkString</a></code> pointers in the global VM state.</p>
<p>These values are the offsets into that index for each of the relevant function names (generally with extra underscores removed). For example <code>METHOD_INIT</code> is the offset for the string value for <code>"__init__"</code>. </p>

<p class="definition">Definition at line <a class="el" href="vm_8h_source.html#l00066">66</a> of file <a class="el" href="vm_8h_source.html">vm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abd4be90c3c58b55439bb59bb63559c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4be90c3c58b55439bb59bb63559c8e">&#9670;&nbsp;</a></span>krk_addObjects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void krk_addObjects </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Concatenate two strings. </p>
<p>This is a convenience function which calls <code>str.__add__</code> on the top stack values. Generally, this should be avoided - use <code><a class="el" href="structStringBuilder.html" title="Inline flexible string array.">StringBuilder</a></code> instead. </p>

<p class="definition">Definition at line <a class="el" href="obj__str_8c_source.html#l00732">732</a> of file <a class="el" href="obj__str_8c_source.html">obj_str.c</a>.</p>

</div>
</div>
<a id="a52e088692f7a0c84155023c8b06caedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52e088692f7a0c84155023c8b06caedd">&#9670;&nbsp;</a></span>krk_callfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_callfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fromFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load and run a file as a module. </p>
<p>Similar to <code>krk_runfile</code> but ensures that execution of the VM returns to the caller after the file is run. This should be run after calling <code>krk_startModule</code> to initialize a new module context and is used internally by the import mechanism.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>Path to the source file to read and execute. </td></tr>
    <tr><td class="paramname">fromFile</td><td>Value to assign to <code>__file__</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The object representing the module, or None if execution of the file failed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l02931">2931</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="aecb9d121ec1eee51596b271695a75072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecb9d121ec1eee51596b271695a75072">&#9670;&nbsp;</a></span>krk_dirObject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_dirObject </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td>
          <td class="paramname"><em>argv</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hasKw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain a list of properties for an object. </p>
<p>This is the native function bound to <code>object.__dir__</code> </p>

<p class="definition">Definition at line <a class="el" href="builtins_8c_source.html#l00015">15</a> of file <a class="el" href="builtins_8c_source.html">builtins.c</a>.</p>

</div>
</div>
<a id="a546937bd02ff16f521d4b7675b41cfd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a546937bd02ff16f521d4b7675b41cfd9">&#9670;&nbsp;</a></span>krk_doRecursiveModuleLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int krk_doRecursiveModuleLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkString.html">KrkString</a> *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a module by a dotted name. </p>
<p>Given a package identifier, attempt to the load module into the module table. This is a thin wrapper around <code><a class="el" href="vm_8h.html#a22918dd9c5fe8e3e7d274da3e45fc0ce" title="Load the dotted name name with the final element as runAs.">krk_importModule()</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>String object of the dot-separated package path to import. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the module was loaded, 0 if an <a class="el" href="mod___builtins__.html#ImportError">ImportError</a> occurred. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l01818">1818</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="ae174ce2f93bf0cc63ae45f90e8c61840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae174ce2f93bf0cc63ae45f90e8c61840">&#9670;&nbsp;</a></span>krk_dumpTraceback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void krk_dumpTraceback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If there is an active exception, print a traceback to <code>stderr</code>. </p>
<p>This function is exposed as a convenience for repl developers. Normally, the VM will call <code><a class="el" href="vm_8h.html#ae174ce2f93bf0cc63ae45f90e8c61840" title="If there is an active exception, print a traceback to stderr.">krk_dumpTraceback()</a></code> itself if an exception is unhandled and no exit trigger is current set. The traceback is obtained from the exception object. If the exception object does not have a traceback, only the exception itself will be printed. The traceback printer will attempt to open source files to print faulting lines and may call into the VM if the exception object has a managed implementation of <code>__str__</code>.</p>
<p>Display a traceback by scanning up the stack / call frames. The format of the output here is modeled after the output given by CPython, so we display the outermost call first and then move inwards; on each call frame we try to open the source file and print the corresponding line. </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00145">145</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a593d5627429c9ebf20f406723df0fd0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593d5627429c9ebf20f406723df0fd0c">&#9670;&nbsp;</a></span>krk_getCurrentThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkThreadState.html">KrkThreadState</a>* krk_getCurrentThread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a pointer to the current thread state. </p>
<p>Generally equivalent to <code>&amp;krk_currentThread</code>, though <code>krk_currentThread</code> itself may be implemented as a macro that calls this function depending on the platform's thread support.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to current thread's thread state. </dd></dl>

</div>
</div>
<a id="a22918dd9c5fe8e3e7d274da3e45fc0ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22918dd9c5fe8e3e7d274da3e45fc0ce">&#9670;&nbsp;</a></span>krk_importModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int krk_importModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkString.html">KrkString</a> *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKrkString.html">KrkString</a> *&#160;</td>
          <td class="paramname"><em>runAs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load the dotted name <code>name</code> with the final element as <code>runAs</code>. </p>
<p>If <code>name</code> was imported previously with a name different from <code>runAs</code>, it will be imported again with the new name; this may result in unexpected behaviour. Generally, <code>runAs</code> is used to specify that the module should be run as <code>__main__</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Dotted path name of a module. </td></tr>
    <tr><td class="paramname">runAs</td><td>Alternative name to attach to <code>__name__</code> for the module. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on failure. </dd></dl>
<p>To import foo.bar.baz</p><ul>
<li>import foo as foo</li>
<li>import foo/bar as foo.bar</li>
<li>import foo/bar/baz as foo.bar.baz</li>
</ul>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l01722">1722</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="afa956022075e59caef32f51e9b48d00c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa956022075e59caef32f51e9b48d00c">&#9670;&nbsp;</a></span>krk_interpret()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_interpret </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fromFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compile and execute a source code input. </p>
<p>This is the lowest level call for most usecases, including execution of commands from a REPL or when executing a file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>Source code to compile and run. </td></tr>
    <tr><td class="paramname">fromFile</td><td>Path to the source file, or a representative string like "&lt;stdin&gt;". </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the executed code, which is either the value of an explicit 'return' statement, or the last expression value from an executed statement. If an uncaught exception occurred, this will be <code>None</code> and <code>krk_currentThread.flags</code> should indicate <code>KRK_THREAD_HAS_EXCEPTION</code> and <code>krk_currentThread.currentException</code> should contain the raised exception value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l02882">2882</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="aaa40a950fdc2439bd080b4560830d1ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa40a950fdc2439bd080b4560830d1ea">&#9670;&nbsp;</a></span>krk_loadModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int krk_loadModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkString.html">KrkString</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a> *&#160;</td>
          <td class="paramname"><em>moduleOut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKrkString.html">KrkString</a> *&#160;</td>
          <td class="paramname"><em>runAs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a module from a file with a specified name. </p>
<p>This is generally called by the import mechanisms to load a single module and will establish a module context internally to load the new module into, return a <a class="el" href="structKrkValue.html" title="Stack reference or primative value.">KrkValue</a> representing that module context through the <code>moduleOut</code> parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Dotted path of the module, used for file lookup. </td></tr>
    <tr><td class="paramname">moduleOut</td><td>Receives a value with the module object. </td></tr>
    <tr><td class="paramname">runAs</td><td>Name to attach to <code>__name__</code> for this module, different from <code>path</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the module was loaded, 0 if an <a class="el" href="mod___builtins__.html#ImportError">ImportError</a> occurred.</dd></dl>
<p>Load a module.</p>
<p>The module search path is stored in <b>builtins</b>.module_paths and should be a list of directories (with trailing forward-slash) to look at, in order, to resolve module names. krk source files will always take priority, so if a later search path has a krk source and an earlier search path has a shared object module, the later search path will still win. </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l01558">1558</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="ae7095dc680592ce473a69eecc10e77ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7095dc680592ce473a69eecc10e77ca">&#9670;&nbsp;</a></span>krk_operator_gt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_operator_gt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare to values, returning True if the left is greater than the right. </p>
<p>This is equivalent to the opcode instruction OP_GREATER. </p>

</div>
</div>
<a id="a689bcd042d2b52dead1188e9ee18bb98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a689bcd042d2b52dead1188e9ee18bb98">&#9670;&nbsp;</a></span>krk_operator_lt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_operator_lt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare two values, returning True if the left is less than the right. </p>
<p>This is equivalent to the opcode instruction OP_LESS. </p>

</div>
</div>
<a id="ade14216c05afbcf8d55b95c887c57d84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade14216c05afbcf8d55b95c887c57d84">&#9670;&nbsp;</a></span>krk_peek()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_peek </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>distance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Peek down from the top of the stack. </p>
<p>Obtains a value from the current thread's stack without modifying the stack.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">distance</td><td>How far down from the top of the stack to peek (0 = the top) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value from the stack. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00338">338</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a73b6ac1f260ba70761fd2e6d757ec233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73b6ac1f260ba70761fd2e6d757ec233">&#9670;&nbsp;</a></span>krk_pop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_pop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pop the top of the stack. </p>
<p>Removes and returns the value at the top of current thread's stack. Generally, it is preferably to leave values on the stack and use krk_peek if the value is desired, as removing a value from the stack may result in it being garbage collected.</p>
<dl class="section return"><dt>Returns</dt><dd>The value previously at the top of the stack.</dd></dl>
<p>Pop the top of the stack. We never reclaim space used by the stack, so anything that is popped can be safely pushed back on without the stack moving, and you an also generally rely on a popped item still being where it was if you don't allocate anything in between; the repl relies on this it expects to be able to get the last pushed value and display it (if it's not None). </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00328">328</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="acbad085e3268a31810c61b4eba9c5e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbad085e3268a31810c61b4eba9c5e13">&#9670;&nbsp;</a></span>krk_push()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void krk_push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkValue.html">KrkValue</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Push a stack value. </p>
<p>Pushes a value onto the current thread's stack, triggering a stack resize if there is not enough space to hold the new value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Value to push.</td></tr>
  </table>
  </dd>
</dl>
<p>Push a value onto the stack, and grow the stack if necessary. Note that growing the stack can involve the stack <em>moving</em>, so do not rely on the memory offset of a stack value if you expect the stack to grow - eg. if you are calling into managed code to do anything, or if you are pushing anything. </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00308">308</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a27e346ab67b34940df32c51fcd850419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27e346ab67b34940df32c51fcd850419">&#9670;&nbsp;</a></span>krk_resetStack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void krk_resetStack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the current thread's stack state to the top level. </p>
<p>In a repl, this should be called before or after each iteration to clean up any remnant stack entries from an uncaught exception. It should not be called during normal execution by C extensions. Values on the stack may be lost to garbage collection after a call to <code>krk_resetStack</code> .</p>
<p>Reset the stack pointers, frame, upvalue list, clear the exception flag and current exception; happens on startup (twice) and after an exception. </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00130">130</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a99cc264b2e561baa3bc7ec2514de19a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99cc264b2e561baa3bc7ec2514de19a1">&#9670;&nbsp;</a></span>krk_runfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_runfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fromFile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load and run a source file and return when execution completes. </p>
<p>Loads and runs a source file. Can be used by interpreters to run scripts, either in the context of a new a module or as if they were continuations of the current module state (eg. as if they were lines entered on a repl)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>Path to the source file to read and execute. </td></tr>
    <tr><td class="paramname">fromFile</td><td>Value to assign to <code>__file__</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>As with <code>krk_interpret</code>, an object representing the newly created module, or the final return value of the VM execution. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l02906">2906</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a1888ed7a2fa5d9f3f1cd619543a4f9a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1888ed7a2fa5d9f3f1cd619543a4f9a1">&#9670;&nbsp;</a></span>krk_runNext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_runNext </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Continue VM execution until the next exit trigger. </p>
<p>Resumes the VM dispatch loop, returning to the caller when the next exit trigger event happens. Generally, callers will want to set the current thread's exitOnFrame before calling <code>krk_runNext</code>. Alternatively, see <code>krk_callValue</code> which manages exit triggers automatically when calling function objects.</p>
<dl class="section return"><dt>Returns</dt><dd>Value returned by the exit trigger, generally the value returned by the inner function before the VM returned to the exit frame.</dd></dl>
<p>Run the VM until it returns from the current call frame; used by native methods to call into managed methods. Returns the value returned by the RETURN instruction that exited the call frame. Should be nestable so a managed method can call a native method can call a managed can call a native and so on (hopefully). </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l02864">2864</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a91c57f379018d1ce7efca0a406e35431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c57f379018d1ce7efca0a406e35431">&#9670;&nbsp;</a></span>krk_runtimeError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkValue.html">KrkValue</a> krk_runtimeError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKrkClass.html">KrkClass</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Raise an exception. </p>
<p>Creates an instance of the given exception type, passing a formatted string to the initializer. All of the core exception types take an option string value to attach to the exception, but third-party exception types may have different initializer signatures and need separate initialization.</p>
<p>The created exception object is attached to the current thread state and the <code>KRK_THREAD_HAS_EXCEPTION</code> flag is set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Class pointer for the exception type, eg. <code>vm.exceptions-&gt;valueError</code> </td></tr>
    <tr><td class="paramname">fmt</td><td>Format string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>As a convenience to C extension authors, returns <code>None</code> </dd></dl>
<p>Raise an exception. Creates an exception object of the requested type and formats a message string to attach to it. Exception classes are found in vm.exceptions and are initialized on startup. </p>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00261">261</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="ad067a4963efa7c2e48afd53fe2269c72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad067a4963efa7c2e48afd53fe2269c72">&#9670;&nbsp;</a></span>krk_startModule()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKrkInstance.html">KrkInstance</a>* krk_startModule </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="structSet.html" title="Mutable unordered set of values.">Set</a> up a new module object in the current thread. </p>
<p>Creates a new instance of the module type and attaches a <code>__builtins__</code> reference to its fields. The module becomes the current thread's main module, but is not directly attached to the module table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Name of the module, which is assigned to <code>__name__</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The instance object representing the module. </dd></dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l02872">2872</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<a id="a8df3bd9547300e90d44e22b137ffb5ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8df3bd9547300e90d44e22b137ffb5ba">&#9670;&nbsp;</a></span>krk_swap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void krk_swap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>distance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Swap the top of the stack of the value <code>distance</code> slots down. </p>
<p>Exchanges the values at the top of the stack and <code>distance</code> slots from the top without removing or shuffling anything in between.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">distance</td><td>How from down from the top of the stack to swap (0 = the top) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="vm_8c_source.html#l00344">344</a> of file <a class="el" href="vm_8c_source.html">vm.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a779017d9bc71ee676356ca7a044eadee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779017d9bc71ee676356ca7a044eadee">&#9670;&nbsp;</a></span>krk_currentThread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">threadLocal <a class="el" href="structKrkThreadState.html">KrkThreadState</a> krk_currentThread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread-local VM state. </p>
<p>See <code><a class="el" href="structKrkThreadState.html" title="Execution state of a VM thread.">KrkThreadState</a></code> for more information. </p>

</div>
</div>
</div><!-- contents -->
      <footer class="container text-center mb-3">
        <p class="mb-0">Copyright 2020-2021 <a href="https://github.com/klange">K. Lange</a></p>
        <p class="mb-0">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" style="height: 20px;" src="doxygen.png" alt="doxygen"/></a> 1.8.17</p>
      </footer>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  </body>
</html>
