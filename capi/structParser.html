<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kuroko: Parser Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kuroko
   </div>
   <div id="projectbrief">Bytecode-compiled interpreted programming language.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">Parser Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Parser:</div>
<div class="dyncontent">
<div class="center"><img src="structParser__coll__graph.png" border="0" usemap="#Parser_coll__map" alt="Collaboration graph"/></div>
<map name="Parser_coll__map" id="Parser_coll__map">
<area shape="rect" title=" " alt="" coords="15,109,77,136"/>
<area shape="rect" href="structKrkToken.html" title="A token from the scanner." alt="" coords="5,5,87,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a563fae856adc8eab7cab040f9a0d393c"><td class="memItemLeft" align="right" valign="top"><a id="a563fae856adc8eab7cab040f9a0d393c"></a>
<a class="el" href="structKrkToken.html">KrkToken</a>&#160;</td><td class="memItemRight" valign="bottom"><b>current</b></td></tr>
<tr class="separator:a563fae856adc8eab7cab040f9a0d393c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33ac40625a534eed6eb427f54b21d781"><td class="memItemLeft" align="right" valign="top"><a id="a33ac40625a534eed6eb427f54b21d781"></a>
<a class="el" href="structKrkToken.html">KrkToken</a>&#160;</td><td class="memItemRight" valign="bottom"><b>previous</b></td></tr>
<tr class="separator:a33ac40625a534eed6eb427f54b21d781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae603c53699af2ce63b255bafafcbd4d3"><td class="memItemLeft" align="right" valign="top"><a id="ae603c53699af2ce63b255bafafcbd4d3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>hadError</b></td></tr>
<tr class="separator:ae603c53699af2ce63b255bafafcbd4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd98c476014d08a76fb275321a5fd8f2"><td class="memItemLeft" align="right" valign="top"><a id="abd98c476014d08a76fb275321a5fd8f2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>panicMode</b></td></tr>
<tr class="separator:abd98c476014d08a76fb275321a5fd8f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38bbca06e7dd583c8276a2da18e982dd"><td class="memItemLeft" align="right" valign="top"><a id="a38bbca06e7dd583c8276a2da18e982dd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>eatingWhitespace</b></td></tr>
<tr class="separator:a38bbca06e7dd583c8276a2da18e982dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>There's nothing really especially different here compared to the Lox compiler from Crafting Interpreters. A handful of additional pieces of functionality are added, and some work is done to make blocks use indentation instead of braces, but the basic layout and operation of the compiler are the same top-down Pratt parser.</p>
<p>The parser error handling has been improved over the Lox compiler with the addition of column offsets and a printed copy of the original source line and the offending token.</p>
<p>String parsing also includes escape sequence support, so you can print quotation marks properly, as well as escape sequences for terminals.</p>
<p>One notable part of the compiler is the handling of list comprehensions. In order to support Python-style syntax, the parser has been set up to support rolling back to a previous state, so that when the compiler sees an expression with references to a variable that has yet to be defined it will first output the expression as if that variable was a global, then it will see the 'in', rewind, parse the rest of the list comprehension, and then output the expression as a loop body, with the correct local references.</p>
<p>if/else and try/except blocks also have to similarly handle rollback cases as they can not peek forward to see if a statement after an indentation block is an else/except. </p>

<p class="definition">Definition at line <a class="el" href="compiler_8c_source.html#l00042">42</a> of file <a class="el" href="compiler_8c_source.html">compiler.c</a>.</p>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/<a class="el" href="compiler_8c_source.html">compiler.c</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
